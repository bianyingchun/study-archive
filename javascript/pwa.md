https://juejin.cn/post/6844904052166230030#heading-4

## 什么是 pwa

渐进式网络应用（PWA）是谷歌在 2015 年底提出的概念。基本上算是 web 应用程序，但在外观和感觉上与原生 app 类似。支持 PWA 的网站可以提供脱机工作、推送通知和设备硬件访问等功能。

## pwa 的优点

1. 更小更快: 渐进式的 web 应用程序比原生应用程序小得多。他们甚至不需要安装。这是他们没有浪费磁盘空间和加载速度非常快。
2. 响应式界面: PWA 支持的网页能够自动适应各种屏幕大小。它可以是手机、平板、台式机或笔记本。
3. 无需更新: 大多数移动应用程序需要每周定期更新。与普通网站一样，每当用户交互发生且不需要应用程序或游戏商店批准时，PWA 总是加载最新更新版本。
4. 高性价比： 原生移动应用需要分别为 Android 和 iOS 设备开发，开发成本非常高。另一方面，PWAs 有着相同的功能，但只是先前价格的一小部分，开发成本低。
5. SEO 优势： 搜索引擎可以发现 PWA，并且加载速度非常快。就像其他网站一样，它们的链接也可以共享。提供良好的用户体验和结果，在 SEO 排名提高。
6. 脱机功能： 由于 service worker API 的支持，可以在脱机或低 internet 连接中访问 PWAs。
7. 安全性： PWA 通过 HTTPS 连接传递，并在每次交互中保护用户数据。
8. 推送通知： 通过推送通知的支持，PWA 轻松地与用户进行交互，提供非常棒的用户体验。
9. 绕过应用商店： 原生 app 如果需要任何新的更新,需要应用商店几天的审批，且有被拒绝或禁止的可能性,对于这方面来说，PWA 有它独特的优势，不需要 App Store 支持。更新版本可以直接从 web 服务器加载，无需 App Store 批准。
10. 零安装： 在浏览过程中，PWA 会在手机和平板电脑上有自己的图标，就像移动应用程序一样，但不需要经过冗长的安装过程。

## PWA 有什么缺点？

1. **对系统功能的访问权限较低**： 目前 PWA 对本机系统功能的访问权限比原生 app 有限。而且，所有的浏览器都不支持它的全部功能，但可能在不久的将来，它将成为新的开发标准。
2. 多数 Android，少数 iOS： 目前更多的支持来自 Android。iOS 系统只提供了部分。
3. 没有审查标准： PWAs 不需要任何适用于应用商店中本机应用的审查，这可能会加快进程，但缺乏从应用程序商店中获取推广效益。

## 如何让一个 web 应用成为 PWA？

一个 web 应用要成为 PWA,有需要一些关键原则需要遵守，如下：

1. 可发现的，内容可以通过搜索引擎找到。
2. 可安装，可以在设备的主屏幕上使用。
3. 可链接，可以通过 URL 来分享它。
4. 与网络无关，可以在离线或网络连接不好的情况下工作。
5. 渐进式的，仍可在较老的浏览器上使用，但在最新的浏览器上功能齐全。
6. 可重新参与，能够发送通知，每当有新的内容可用。
7. 响应式，可以在任何有屏幕和浏览器的设备上使用 —— 手机、平板、笔记本、电视、冰箱等等。
8. 安全，用户和应用程序之间的连接是安全的，不受任何第三方试图访问用户敏感数据的影响。

## 为什么我们在 PWA 中需要 Web manifest？

难度：⭐⭐

**Web manifest 以 JSON 格式列出关于网站的所有信息。这个文件是使网站可安装的要求之一**。
它通常驻留在一个 web 程序的根文件夹。其中包含一些有用的信息,如应用程序的标题，路径不同大小的图标，可以用来表示移动操作系统上的应用程序(例如,主屏幕图标)，和一个背景颜色用于加载或闪屏。浏览器需要这些信息才能在安装和主屏幕上正确显示 web 程序。

## PWA 有哪些原生 app 不具备的特性?

**可发现性——PWA 中的内容很容易被搜索引擎找到**，但诸如掘金之类的以内容为中心的原生 app 来说不会在其确实提供访问权限的内容的应用商店搜索结果中得到它确切提供访问的内容（也就是无法通过应用商店去搜索到文章嘿嘿 😂，我大 PWA 就不一样了）。
**可链接性——任何页面/屏幕都可以有一个直接链接，可以很容易地共享**
可收藏性——保存该链接以直接访问应用程序的视图
**始终新鲜——不需要通过应用商店来推送更新**
通用访问权限——**不受应用商店政策**或地理限制（你懂的 🤣）
节省大量数据——这对于昂贵且/或互联网访问速度缓慢的新兴市场至关重要。例如，Konga(电子商务网站)通过迁移到 PWA 减少了 92％的首次负载数据使用量。
发行摩擦低——如果你的 PWA 在线，则 Android（和其他移动）用户已经可以使用它。

大部分手机用户没有每月下载任何新的应用程序
PWAs 不需要去 app store，搜索 app，点击 Install，等待下载，然后打开 app。每一步都会损失 20%的潜在用户（懒癌福音，简直了 🤣）。

## service worker 是什么
Service workers 本质上充当Web应用程序与浏览器之间的代理服务器，也可以在网络可用时作为浏览器和网络间的代理. Service worker是一个注册在指定源和路径下的事件驱动worker。它采用JavaScript控制关联的页面或者网站，拦截并修改访问和资源请求，细粒度地缓存资源。你可以完全控制应用在特定情形（最常见的情形是网络不可用）下的表现。

Service worker运行在worker上下文，因此它不能访问DOM。相对于驱动应用的主JavaScript线程，它运行在其他线程中，所以不会造成阻塞。它设计为完全异步，同步API（如XHR和localStorage）不能在service worker中使用。

出于安全考量，Service workers只能由HTTPS承载，毕竟修改网络请求的能力暴露给中间人攻击会非常危险
[service worker 是什么](./service%20woker.md)

## PWA与Hybrid之间有什么不同？

难度：⭐⭐⭐

1. Hybrid通常是指使用web和原生技术(native technology)的组合构建的应用程序，这些程序通过应用商店发布。要经过苹果、谷歌、微软等公司的应用程序商店审查程序。
2. PWA是使用在浏览器中运行的Web技术构建的应用程序，可以添加到主屏幕（就是固定到桌面🐷）。它们不需要通过本地应用程序商店发布，但可以包含在其中，Microsoft自2018年起在其Microsoft Store中包含了PWA

## 有哪些Service Worker能做但是web worker不能的？

难度：⭐⭐⭐⭐⭐

1. Web Workers——为Web内容提供在后台线程中运行脚本的简单方法。工作线程可以在不干扰用户界面的情况下执行任务。此外，它们还可以使用XMLHttpRequest执行I/O（尽管responseXML和channel属性始终为空）。创建后，工作人员可以通过将消息发布到该代码指定的事件处理程序中来向创建该代码的JavaScript代码发送消息（反之亦然）。

2. Service Worker——本质上是充当位于Web app与浏览器和网络（如果可用）之间的代理服务器。它们旨在（除其他外）创建有效的脱机体验，拦截网络请求并根据网络是否可用以及服务器上是否存在更新的资产(assets)来采取适当的操作。它们还允许访问推送通知和后台同步API。

