https://juejin.cn/post/6844904100035821575

## HTTP 报文结构是怎样的

header + body 的结构，具体而言:

起始行 + 头部 + 空行 + 实体

1. 起始行

- 请求报文 ： GET /home HTTP/1.1
  方法 + 路径 + http 版本。

- 响应报文，HTTP/1.1 200 OK 版本 + 状态码 + 原因
  响应报文的起始行也叫做状态行。由 http 版本、状态码和原因三部分组成。

2. 头部

3. 空行
   用来区分 起始行 和 实体
4. 实体
   就是具体的数据了，也就是 body 部分。请求报文对应请求体, 响应报文对应响应体

## http 缺点

1. 明文传输
   即协议里的报文(主要指的是头部)不使用二进制数据，而是文本形式。
   这当然对于调试提供了便利，但同时也让 HTTP 的报文信息暴露给了外界，给攻击者也提供了便利。WIFI 陷阱就是利用 HTTP 明文传输的缺点，诱导你连上热点，然后疯狂抓你所有的流量，从而拿到你的敏感信息。
2. 队头堵塞
   HTTP/1.1 默认使用了**持久连接**keep-alive，多个请求可以复用**同一个 TCP 连接**，但是在 同一个 TCP 连接里面，数据请求的通信次序 是固定的。服务器只有处理完一个请求的响应后，才会进行下一个请求的处理，如果前面请求的响应特别慢的话， 就会造成许多请求排队等待的情况，这种情况被称为“队头堵塞”。

3. 无状态
   在需要长连接的场景中，需要保存大量的上下文信息，以免传输大量重复的信息，那么这时候无状态就是 http 的缺点了。

但与此同时，另外一些应用仅仅只是为了获取一些数据，不需要保存连接上下文信息，无状态反而减少了网络开销，成为了 http 的优点。

## http 和 https 的区别及优缺点？

- http 是超文本传输协议，信息是明文传输，HTTPS 协议要比 http 协议安全，https 是具有安全性的 ssl 加密传输协议，可防止数据在传输过程中被窃取、改变，确保数据的完整性(当然这种安全性并非绝对的，对于更深入的 Web 安全问题，此处暂且不表)。
- http 协议的默认端口为 80，https 的默认端口为 443。
- http 的连接很简单，是无状态的。https 握手阶段比较费时，会使页面加载时间延长 50%，增加 10%~20%的耗电。
- https 缓存不如 http 高效，会增加数据开销。
- Https 协议需要 ca 证书，费用较高，功能越强大的证书费用越高。
- SSL 证书需要绑定 IP，不能再同一个 IP 上绑定多个域名，IPV4 资源支持不了这种消耗。

## TCP/IP / 如何保证数据包传输的有序可靠？

- 数据分块：应用数据被分割成 TCP 认为最适合发送的数据块。
- 序列号：TCP 给发送的每一个包进行编号，接收方对数据包进行排序，把有序数据传送给应用层。
- 校验和： TCP 将保持它首部和数据的检验和。这是一个端到端的检验和，目的是检测数据在传输过程中的任何变化。如果收到段的检验和有差错，TCP 将丢弃这个报文段和不确认收到此报文段。
- 重复丢弃：TCP 的接收端会丢弃重复的数据。
- 流量控制： TCP 连接的每一方都有固定大小的缓冲空间，TCP 的接收端只允许发送端发送接收端缓冲区能接纳的数据。当接收方来不及处理发送方的数据，能提示发送方降低发送的速率，防止包丢失。TCP 使用的流量控制协议是可变大小的滑动窗口协议。 （TCP 利用滑动窗口实现流量控制）
- 拥塞控制： 当网络拥塞时，减少数据的发送。
- 停止等待协议 也是为了实现可靠传输的，它的基本原理就是每发完一个分组就停止发送，等待对方确认。在收到确认后再发下一个分组。 超时重传： 当 TCP 发出一个段后，它启动一个定时器，等待目的端确认收到这个报文段。如果不能及时收到一个确认，将重发这个报文段。

## TCP 和 UDP 的区别

TCP 是面向连接的，UDP 是无连接的
TCP 是可靠的，UDP 是不可靠的
TCP 是面向字节流的，UDP 是面向数据报文的
TCP 只支持点对点通信，UDP 支持一对一，一对多，多对多
TCP 报文首部 20 个字节，UDP 首部 8 个字节
TCP 有拥塞控制机制，UDP 没有
TCP 协议下双方发送接受缓冲区都有，UDP 并无实际意义上的发送缓冲区，但是存在接受缓冲区

## post 和 get 请求的区别

- 应用场景： GET 请求是一个幂等的请求，一般 Get 请求用于对服务器资源不会产生影响的场景，比如说请求一个网页的资源。而 Post 不是一个幂等的请求，一般用于对服务器资源会产生影响的情景，比如注册用户这一类的操作。

- 是否缓存： 因为两者应用场景不同，浏览器一般会对 Get 请求缓存，但很少对 Post 请求缓存。

- 发送的报文格式： Get 请求的报文中实体部分为空，Post 请求的报文中实体部分一般为向服务器发送的数据。

- 安全性： Get 请求可以将请求的参数放入 url 中向服务器发送，这样的做法相对于 Post 请求来说是不太安全的，因为请求的 url 会被保留在历史记录中。

- 请求长度： 浏览器由于对 url 长度的限制，所以会影响 get 请求发送数据时的长度。这个限制是浏览器规定的，并不是 RFC 规定的。

- 参数类型： post 的参数传递支持更多的数据类型。
